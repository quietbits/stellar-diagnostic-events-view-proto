# Stellar Diagnostic Events Viewer Prototype

> [!WARNING]
> Built with AI and should be used only as a visual prototype.

A React-based tool for visualizing and analyzing Stellar/Soroban transaction diagnostic events, providing hierarchical views of function calls, contract events, and system metrics.

## Key Concepts

**System Events**: Events with `contract_id: null` represent system-level operations (transaction entry points, runtime metrics, host environment operations) generated by the Soroban runtime itself, rather than by user-deployed smart contracts.

## AI Analysis of `fn_call` and `fn_return` Relationship

**`fn_return` events follow a stack-based pattern**, but it's not always a simple 1:1 preceding relationship. Here's what I observed:

1. **Stack-based execution**: Function calls follow a call stack pattern where:
   - `fn_call` pushes onto the stack
   - `fn_return` pops from the stack
   - The most recent unmatched `fn_call` corresponds to the next `fn_return`

2. **Nested calls**: Functions can call other functions, creating nested patterns like:
   ```
   fn_call A
     fn_call B
     fn_return B
   fn_return A
   ```

3. **Multiple returns**: Sometimes there are multiple `fn_return` events in sequence, which means multiple nested function calls are returning in LIFO (Last In, First Out) order.

4. **Function name matching**: The `fn_return` event contains the function name in `topics[1]`, which should match the function name from the corresponding `fn_call` event.


## AI Analysis: How `contract` Events Relate to `fn_call`/`fn_return`

Based on my analysis, here's the clear relationship:

### **Contract events are emitted DURING function execution, between `fn_call` and `fn_return`**

The pattern is:

1. **`fn_call`** (diagnostic) - Function starts executing
2. **`contract`** events - Business logic events emitted during function execution  
3. **`fn_return`** (diagnostic) - Function completes and returns

### **Specific Example from the Data:**

```
fn_call "transfer"           (diagnostic event)
  ↓
transfer event               (contract event - the actual business event)
  ↓  
fn_return "transfer"         (diagnostic event)
```

### **Key Insights:**

1. **Contract events are business/application events** - They represent meaningful business logic like transfers, mints, burns, swaps, etc.

2. **Diagnostic events are execution events** - They track the technical execution flow (function calls, returns, metrics)

3. **Contract events happen WITHIN function calls** - They're emitted by the smart contract code during execution, so they appear between the corresponding `fn_call` and `fn_return`

4. **Multiple contract events per function** - A single function can emit multiple contract events

5. **Contract events have meaningful data** - They contain the actual business data (amounts, addresses, etc.) while diagnostic events contain execution metadata